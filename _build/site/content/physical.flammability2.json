{"version":2,"kind":"Notebook","sha256":"32f3d8b4d6472d6c017c4b14faa9cf87e3396e91e47a2dcbd702638f1e757de6","slug":"physical.flammability2","location":"/physical/19-Flammability2.ipynb","dependencies":[],"frontmatter":{"title":"19-Flammability 2","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"jupiterbook","language":"python"},"authors":[{"nameParsed":{"literal":"Clint Guymon","given":"Clint","family":"Guymon"},"name":"Clint Guymon","id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Brigham Young University","given":"Brigham Young","family":"University"},"name":"Brigham Young University","id":"contributors-myst-generated-uid-1"}],"github":"https://github.com/clint-bg/safetyinjc","numbering":{"title":{"offset":1}},"edit_url":"https://github.com/clint-bg/safetyinjc/blob/main/physical/19-Flammability2.ipynb","exports":[{"format":"ipynb","filename":"19-Flammability2.ipynb","url":"/19-Flammability2-3107b811d60d52b255ae5413431eadea.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Download lecture freeform here: ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KfkDGNiUar"},{"type":"link","url":"https://github.com/clint-bg/safetyinjc/blob/main/physical/supportfiles/311Flammability.pdf","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"physical​/supportfiles​/311Flammability​.pdf","key":"OY5KdcTcna"}],"urlSource":"https://github.com/clint-bg/safetyinjc/blob/main/physical/supportfiles/311Flammability.pdf","data":{"kind":"file","org":"clint-bg","repo":"safetyinjc","reference":"main","file":"physical/supportfiles/311Flammability.pdf","raw":"https://raw.githubusercontent.com/clint-bg/safetyinjc/main/physical/supportfiles/311Flammability.pdf"},"internal":false,"protocol":"github","key":"O5LJUvi7hI"}],"key":"xL7MiRk2gW"}],"key":"Lzv4AG0fwO"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Python Flammability Diagram","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WvGCGgKK4v"}],"identifier":"python-flammability-diagram","label":"Python Flammability Diagram","html_id":"python-flammability-diagram","implicit":true,"key":"snwXsFrpWa"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Below code submitted by ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"W8Heyvh1AZ"},{"type":"link","url":"https://www.linkedin.com/in/isaac-matthews-2a0244290/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Isaac Matthews","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mA4lLYODns"}],"urlSource":"https://www.linkedin.com/in/isaac-matthews-2a0244290/","key":"QDNsLp8weP"},{"type":"text","value":", 2024.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WBPlwjymRU"}],"key":"R6an8ijAQQ"}],"key":"owzxcYBSvX"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Requirements for the equalateral flammability diagram below:\n#pip install matplotlib, python-ternary; the below code wont work if you install ternary,","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"v0PYR4zN4m"}],"key":"KmCLvxxOPs"}],"key":"LHbBupKvzR"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\nimport ternary\nfrom scipy.optimize import fsolve\nufl = 74\nlfl = 4\nstoic = 66.7 #stoichiometric ratio for hydrogen in oxygen\nloc = 2\n\ndef flammabilityTriangle(name,lfl, ufl, stoic,loc,figsize = (10, 8)):\n    # The stoic value is the stoichiometric ratio of fuel in pure oxygen\n    lfl_o = (100-lfl)*0.21; ufl_o = (100-ufl)*0.21\n    lfl_n = 100 - lfl - lfl_o; ufl_n = 100 - ufl - ufl_o\n    slope = 1/(100/stoic-1) # z/y or ratio of fuel to oxygen at stoichiometric mixture\n    def eq(vars):\n        x, y = vars #x is n2, y is o2\n        denom = x+y*(1+slope)\n        eq1 = loc/100 - y/(denom)\n        eq2 = loc/100 + x/denom + y*slope/denom - 1\n        return eq1, eq2\n    mol_n2, mol_o2 = fsolve(eq, (0.5, 0.5)); mol_f = slope*mol_o2\n    loc_f = mol_f/(mol_n2+mol_o2+mol_f)*100\n    uol = ufl*(100+1.87*(100-ufl_o))/(ufl_o+ufl*(1+1.87)) #upper flammability limit in pure oxygen\n    lol = lfl\n    data = [\n         #nitrogen fuel oxygen\n        [0, 0, 100],  # Pure Oxygen 0\n        [79, 0, 21],  # Pure Air 1\n        [0, 100, 0],  # Pure Fuel 2\n        [100,0,0],    # pure n2  3\n        [lfl_n, lfl, lfl_o],  #LFL  4\n        [ufl_n,ufl,ufl_o],    #UFL  5\n        [0,uol,100-uol], #upper loc 6 (uol)\n        [0,stoic,100-stoic], #left most stoic point  7\n        [100-loc-loc_f, loc_f,loc],#intersection  8 (actual loc at stoichiometric point)\n        [0,lol,100-lol], #lol 9\n        # Add more data points as needed\n    ]\n    # Create a larger figure\n    whole = plt.figure(figsize=figsize)\n    box = whole.subplots()\n    # Create a ternary plot\n    fig, tax = ternary.figure(ax = box, scale=100)\n    #fix what terniary messes up\n    box.set_ylim(-20,110)\n    box.set_xlim(-10,120)\n    box.set_aspect(1)\n    box.tick_params(axis='both', which='both', length=0,labelcolor = 'white') #if you can't beat them join them\n\n    tax.ticks(axis='lbr', linewidth=1, multiple=10, offset=0.02, clockwise=False)\n    # Plot data points\n    tax.scatter(data, marker='.', color='k', label='Data Points')\n\n    # Add a line between pure fuel and pure air\n    tax.line(data[2], data[1], color='green', linestyle='-',label = \"Air line\")\n    #tax.line(data[9], data[8], color='red', alpha=0.6, linestyle='--', label = \"Flammability region\")\n    tax.line(data[3], data[7], color='blue', alpha=0.9, linestyle='-', label = \"Stoichiometric line\")\n    #tax.line(data[6], data[8], color='red', alpha=0.6, linestyle='--')\n\n    # --- Corrected part for shading (hopefully for good this time!) ---\n    # Define the vertices of the flammability region in ternary coordinates\n    flammability_vertices_ternary = [data[9], data[8], data[6]]\n\n    # Convert ternary coordinates to Cartesian (x, y) coordinates for matplotlib's fill\n    flammability_vertices_cartesian = ternary.helpers.project_sequence(flammability_vertices_ternary)\n\n    # Use the underlying matplotlib axes (box) to fill the region\n    box.fill(\n        flammability_vertices_cartesian[0], # X coordinates\n        flammability_vertices_cartesian[1], # Y coordinates\n        color='red',\n        alpha=0.1,\n        label=\"Flammability Region (Shaded)\"\n    )\n    # --- End of corrected part ---\n\n    # Customize the plot\n    #tax.set_title(f\"Flammability Triangle for {name} in Air\", fontsize=16)\n    tax.left_axis_label(\"Oxygen\", fontsize=14, offset=0.1)\n    tax.right_axis_label(name, fontsize=14, offset=0.02)\n    tax.bottom_axis_label(\"Nitrogen\", fontsize=14, offset=-.1)\n    tax.gridlines(color=\"lightgrey\", multiple=10, linewidth=1, linestyle='--')\n\n    # Define labels for data points\n    labels = [\"\", \"\", \"\",\"\",\"LFL\",\"UFL\",\"UOL\",\"\",\"\",\"\"]\n\n    # Add labels for data points\n    for i, point in enumerate(data):\n        tax.annotate(labels[i], position=point, fontsize=10)\n\n    # Add legend\n    tax.legend()\n\n    # Show the plot\n    plt.ticks = False\n    plt.show()\n\nflammabilityTriangle(\"Hydrogen\", lfl,ufl,stoic,loc)","key":"rhEHrwso3t"},{"type":"output","id":"cu1KkXEG9ty2bdWL3NYPF","data":[{"name":"stderr","output_type":"stream","text":"/Users/clintguymon/opt/anaconda3/envs/jupiterbook/lib/python3.9/site-packages/ternary/plotting.py:148: UserWarning: No data for colormapping provided via 'c'. Parameters 'vmin', 'vmax' will be ignored\n  ax.scatter(xs, ys, vmin=vmin, vmax=vmax, **kwargs)\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"5de735f3c0ceaa574ad4740ab50eda11","path":"/5de735f3c0ceaa574ad4740ab50eda11.png"},"text/plain":{"content":"<Figure size 1000x800 with 1 Axes>","content_type":"text/plain"}}}],"key":"OGIcdfwdk3"}],"key":"jum4C9hyPW"}],"key":"cvXg0D3WGF"},"references":{"cite":{"order":[],"data":{}}}}